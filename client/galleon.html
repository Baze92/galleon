<head>
	<title>galleon</title>
</head>

<body>
	{{> home}}
</body>

<template name="home">

	{{loginButtons}}

	{{#if currentUser}}
		Hello, how are you?

		{{> create}}

		{{> details}}
	{{/if}}
</template>

<template name="create">
	<form id="form-create">
		<input type="date" class="" id="date" value="{{todayDate}}">
		<input type="number" class="" id="amount" placeholder="amount" autofocus>
		<input type="text" class="" id="tags" placeholder="tags (space-separated)">

		<button type="submit" class="btn">Submit</button>
	</form>
</template>

<template name="details">
	<!-- <nav>
		<p>&laquo; <a href="#" class="container-toggle" data-toggle="main-form">Back</a></p>
	</nav> -->

	<h2>All Data</h2>

	{{#each expenditures}}
	<li data-id="{{_id}}">
		{{date}}
		<strong>{{formatAmount value currency}}</strong>
		{{#each tags}}
			<span class="tag">{{.}}</span>
		{{/each}}
	</li>
	{{/each}}

	<br> <br>

	<h2>Data grouped by month</h2>

	{{#groupByMonth expenditures}}

		<em>{{formatDate 'MONTH_YEAR' date}}</em><br>
		Total: {{totalAmount monthlyExpenditures}}<br>

		{{#groupByDay monthlyExpenditures}}
			<strong>{{formatDate 'DATE' date}} {{formatDate 'DAY' date}}</strong><br>
			Total: {{totalAmount dailyExpenditures}}
			{{#each dailyExpenditures}}
				<li>{{value}} {{tags}}</li>
			{{/each}}
		{{/groupByDay}}

	{{/groupByMonth}}

	<h2>Tags</h2>

	{{#each tagsWithCount}}
		{{name}}({{count}})

		{{#each findByTag name}}
			{{value}}
		{{/each}}
		<br>
	{{/each}}

	<!-- <ul id="yearly-details" class="years unstyled">
		{{#each grouped_data}}
		<li>
			<h1>{{year}}</h1>
			<ul class="months unstyled">
				{{#each data}}
				<li>
					<h2>{{month}} <small>/ ${{monthly_total}}</small></h2>
					<ul class="days unstyled">
						{{#each data}}
						<li class="day-title">
							<hgroup>
								<h3 class="date">{{display_date}} <i>{{display_day}}</i></h3>
								<h4 class="day-total">${{total}}</h4>
							</hgroup>
							<ul class="items unstyled">
								{{#each data}}
								<li data-id="{{_id}}">
									$<strong>{{display_amount}}</strong>
									{{#each tags}}
										<span class="tag">{{.}}</span>
									{{/each}}
								</li>
								{{/each}}
							</ul>
						</li>
						{{/each}}
					</ul>
				</li>
				{{/each}}
			</ul>
		</li>
		{{/each}}
	</ul> -->
</template>